{"version":3,"sources":["restaurant_info.js"],"names":["window","initMap","fetchRestaurantFromURL","maps","Map","document","restaurant","zoom","latlng","center","fillBreadcrumb","DBHelper","mapMarkerForRestaurant","self","map","addListener","querySelector","iFrame","catch","console","error","id","getParameterByName","fetchRestaurantById","fillRestaurantHTML","arguments","length","undefined","getElementById","name","addressTitle","address","image","src","imageUrlForRestaurant","setAttribute","sizes","srcsetForRestaurant","cuisineTitle","cuisine","operating_hours","hourTitle","fillRestaurantHoursHTML","fillReviewsHTML","operatingHours","key","hours","day","row","className","createElement","appendChild","time","reviews","container","title","textContent","ul","noReviews","review","createReviewHTML","join","date","reviewHTML","breadcrumb","li","url","location","replace","results","RegExp","exec","decodeURIComponent"],"mappings":"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","file":"restaurant_info.js","sourcesContent":["/**\n * Initialize Google map, called from HTML.\n */\n\nwindow.initMap = () => {\n    fetchRestaurantFromURL()\n    .then((restaurant) => {\n            self.map = new google.maps.Map(document.getElementById('map'), {\n                zoom: 16,\n                center: restaurant.latlng,\n                scrollwheel: false\n            });\n            \n            fillBreadcrumb();\n            \n            DBHelper.mapMarkerForRestaurant(self.restaurant, self.map);\n            \n            let setTitle = () => {\n                const iFrame = document.querySelector('#map iframe');\n                iFrame.setAttribute('title', 'Map with selected restaurant marker');\n            }\n            self.map.addListener('tilesloaded', setTitle);\n    })\n    .catch(error => {\n        console.error(error);\n    });\n};\n/**\n * Get current restaurant from page URL.\n * Error handling is in window.initMap()\n */\nconst fetchRestaurantFromURL = () => {\n    if (self.restaurant) {\n        return self.restaurant;\n    }\n\n    const id = getParameterByName('id');\n    return DBHelper.fetchRestaurantById(id)\n        .then((restaurant) => {\n                self.restaurant = restaurant;\n                fillRestaurantHTML();\n                return restaurant;\n    })\n};\n\n/**\n * Create restaurant HTML and add it to the webpage\n */\nconst fillRestaurantHTML = (restaurant = self.restaurant) => {\n    const name = document.getElementById('restaurant-name');\n    name.textContent = restaurant.name;\n\n    const addressTitle = document.getElementById('address-title');\n    addressTitle.textContent = 'Address';\n\n    const address = document.getElementById('restaurant-address');\n    address.textContent = restaurant.address;\n\n    const image = document.getElementById('restaurant-img');\n    image.src = DBHelper.imageUrlForRestaurant(restaurant);\n    image.setAttribute('alt', restaurant.alt);\n    image.sizes = '100vw';\n    image.srcset = DBHelper.srcsetForRestaurant(restaurant);\n\n    const cuisineTitle = document.getElementById('cuisine-title');\n    cuisineTitle.textContent = 'Cuisine';\n\n    const cuisine = document.getElementById('restaurant-cuisine');\n    cuisine.textContent = restaurant.cuisine_type;\n\n    // fill operating hours\n    if (restaurant.operating_hours) {\n        const hourTitle = document.getElementById('hours-title');\n        hourTitle.textContent = 'Operating Hours';\n\n        fillRestaurantHoursHTML();\n    }\n    // fill reviews\n    fillReviewsHTML();\n};\n\n/**\n * Create restaurant operating hours HTML table and add it to the webpage.\n */\nconst fillRestaurantHoursHTML = (operatingHours = self.restaurant.operating_hours) => {\n    const hours = document.getElementById('restaurant-hours');\n\n    for (let key in operatingHours) {\n        const row = document.createElement('tr');\n\n        const day = document.createElement('td');\n        day.textContent = key;\n        day.className = 'day';\n        row.appendChild(day);\n\n        const time = document.createElement('td');\n        time.textContent = operatingHours[key];\n        time.className = 'time';\n        row.appendChild(time);\n\n        hours.appendChild(row);\n    }\n};\n\n/**\n * Create all reviews HTML and add them to the webpage.\n */\nconst fillReviewsHTML = (reviews = self.restaurant.reviews) => {\n    const container = document.getElementById('reviews-container');\n    const title = document.createElement('h2');\n    title.className = 'review-section-title';\n    title.textContent = 'Reviews';\n    container.appendChild(title);\n\n    if (!reviews) {\n        const noReviews = document.createElement('p');\n        noReviews.textContent = 'No reviews yet!';\n        container.appendChild(noReviews);\n        return;\n    }\n    const ul = document.getElementById('reviews-list');\n    ul.innerHTML = reviews.map(review => createReviewHTML(review)).join('');\n    container.appendChild(ul);\n};\n\n/**\n * Create review HTML and add it to the webpage.\n */\nconst createReviewHTML = (review) => {\n    const reviewHTML = \n    `<li class=\"reviews-list-item\">\n        <div class=\"name-container\">\n            <p>${review.name}</p>\n            <p class=\"review-date\">${review.date}</p>\n        </div>\n        <p class=\"rating\">Rating: ${review.rating}</p>\n        <p class=\"comments\">${review.comments}</p>\n    </li>`;\n    return reviewHTML;\n};\n\n/**\n * Add restaurant name to the breadcrumb navigation menu\n */\n\nconst fillBreadcrumb = (restaurant = self.restaurant) => {\n    const breadcrumb = document.getElementById('breadcrumb');\n    const li = document.createElement('li');\n    li.textContent = restaurant.name;\n    breadcrumb.appendChild(li);\n};\n\n/**\n * Get a parameter by name from page URL.\n */\nconst getParameterByName = (name, url) => {\n    if (!url)\n        url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`),\n        results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};"]}